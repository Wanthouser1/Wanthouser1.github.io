<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> CVS-Available-Covid-Vaccines | Robert C. Wanthouse </title> <meta name="author" content="Robert C. Wanthouse"> <meta name="description" content="This code will look to see if there are any available Covid vaccines at your local CVS. If there is availability, you will receive a text. You need a Twilio account in order to receive SMS."> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://wanthouser1.github.io/projects/1_project/"> <script src="/assets/js/theme.js?a5ca4084d3b81624bcfa01156dae2b8e"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Robert</span> C. Wanthouse </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">CVS-Available-Covid-Vaccines</h1> <p class="post-description">This code will look to see if there are any available Covid vaccines at your local CVS. If there is availability, you will receive a text. You need a Twilio account in order to receive SMS.</p> </header> <article> <p>This Python script automates the process of finding COVID-19 vaccine appointments at CVS pharmacies. Using Selenium, the script navigates to the CVS website, selects the userâ€™s state, and checks for vaccine availability. If appointments are available, it sends a notification via Twilio SMS to alert the user. The script runs periodically using the APScheduler library to ensure continuous monitoring of vaccine availability. This project demonstrates the use of web scraping and automation techniques to streamline the process of scheduling vaccine appointments, contributing to the ongoing efforts to combat the COVID-19 pandemic.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/env python3
</span><span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="n">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>
<span class="kn">from</span> <span class="n">selenium.webdriver.common.keys</span> <span class="kn">import</span> <span class="n">Keys</span>
<span class="kn">import</span> <span class="n">time</span>
<span class="kn">from</span> <span class="n">selenium.webdriver.common.action_chains</span> <span class="kn">import</span> <span class="n">ActionChains</span>
<span class="kn">import</span> <span class="n">os</span>
<span class="kn">from</span> <span class="n">twilio.rest</span> <span class="kn">import</span> <span class="n">Client</span>
<span class="kn">from</span> <span class="n">apscheduler.schedulers.blocking</span> <span class="kn">import</span> <span class="n">BlockingScheduler</span>


<span class="k">def</span> <span class="nf">vaccine_finder</span><span class="p">():</span>
    <span class="c1"># Your Account Sid and Auth Token from twilio.com/console
</span>    <span class="c1"># and set the environment variables. See http://twil.io/secure
</span>    <span class="n">account_sid</span> <span class="o">=</span> <span class="sh">'</span><span class="s">YOUR ACCOUNT SID</span><span class="sh">'</span>
    <span class="n">auth_token</span> <span class="o">=</span> <span class="sh">'</span><span class="s">YOUR AUTH TOKEN</span><span class="sh">'</span>
    <span class="n">sender</span> <span class="o">=</span> <span class="sh">'</span><span class="s">SENDER NUMBER FROM TWILIO</span><span class="sh">'</span>
    <span class="n">receiver</span> <span class="o">=</span> <span class="sh">'</span><span class="s">RECEIVER NUMBER</span><span class="sh">'</span>
    <span class="n">client</span> <span class="o">=</span> <span class="nc">Client</span><span class="p">(</span><span class="n">account_sid</span><span class="p">,</span> <span class="n">auth_token</span><span class="p">)</span>

    <span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="p">.</span><span class="nc">Chrome</span><span class="p">(</span><span class="sh">'</span><span class="s">DRIVER LOCATION</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">action</span> <span class="o">=</span> <span class="nc">ActionChains</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span>
    <span class="n">driver</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="sh">"</span><span class="s">https://www.cvs.com/immunizations/covid-19-vaccine</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">driver</span><span class="p">.</span><span class="nf">execute_script</span><span class="p">(</span><span class="sh">"</span><span class="s">window.scrollTo(0,document.body.scrollHeight)</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">time</span><span class="p">.</span><span class="nf">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

    <span class="n">driver</span><span class="p">.</span><span class="nf">find_element_by_partial_link_text</span><span class="p">(</span><span class="sh">'</span><span class="s">YOUR STATE</span><span class="sh">'</span><span class="p">).</span><span class="nf">click</span><span class="p">()</span>
    <span class="n">element</span> <span class="o">=</span> <span class="n">driver</span><span class="p">.</span><span class="nf">find_element_by_class_name</span><span class="p">(</span><span class="sh">"</span><span class="s">boxcontainer</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">action</span><span class="p">.</span><span class="nf">move_to_element</span><span class="p">(</span><span class="n">element</span><span class="p">).</span><span class="nf">perform</span><span class="p">()</span>


    <span class="n">vaccine_is_available</span> <span class="o">=</span> <span class="sh">'</span><span class="s">Available</span><span class="sh">'</span>
    <span class="n">nj_availability_status</span> <span class="o">=</span> <span class="n">driver</span><span class="p">.</span><span class="nf">find_element_by_xpath</span><span class="p">(</span><span class="sh">'</span><span class="s">/html/body/div[2]/div/div[19]/div/div/div/div/div/div[1]/div[2]/div/div/div[2]/div/div[6]/div/div/table</span><span class="sh">'</span><span class="p">).</span><span class="n">text</span>
    <span class="k">if</span> <span class="n">nj_availability_status</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">vaccine_is_available</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">We found you a vaccine!</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">messages</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">body</span> <span class="o">=</span> <span class="sh">'</span><span class="s">We found you a vaccine! go to https://www.cvs.com/immunizations/covid-19-vaccine to schedule your appointment now!</span><span class="sh">'</span><span class="p">,</span><span class="n">from_</span> <span class="o">=</span> <span class="n">sender</span><span class="p">,</span><span class="n">to</span> <span class="o">=</span> <span class="n">receiver</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">No vaccines available in your area.</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">driver</span><span class="p">.</span><span class="nf">quit</span><span class="p">()</span>

<span class="nf">vaccine_finder</span><span class="p">()</span>

<span class="c1"># Schedules job_function to be run once each minute
</span><span class="n">scheduler</span> <span class="o">=</span> <span class="nc">BlockingScheduler</span><span class="p">()</span>
<span class="n">scheduler</span><span class="p">.</span><span class="nf">add_job</span><span class="p">(</span><span class="n">vaccine_finder</span><span class="p">,</span> <span class="sh">'</span><span class="s">interval</span><span class="sh">'</span><span class="p">,</span> <span class="n">minutes</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">scheduler</span><span class="p">.</span><span class="nf">start</span><span class="p">()</span>
</code></pre></div></div> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> Â© Copyright 2024 Robert C. Wanthouse. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?b7816bd189846d29eded8745f9c4cf77"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>